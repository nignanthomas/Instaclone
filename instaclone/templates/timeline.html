{% extends 'base.html' %}
{% load bootstrap4 %}


{% block content %}


<div class="container">

<p>Hello InstaClone</p>


  <div class="row">

    <div class="col-md-8 col-lg-8">
    <div class="row">
      {% for post in posts %}
          <div class="card mb-5" style="width: 75rem;">
            <div class="custom-card-header">
              <div class="modal-image">
                <img src="{{post.upload_by.profile_pic.url}}" class="rounded img-fluid" alt=""  width="75px" height="75px">
              </div>

              <p class="username">{{post.upload_by.username}}</p>
              <footer class="location">{{post.location}}</footer>
            </div>

            <a href="{{post.photo_pic.url}}" data-fancybox="images" data-buttons='["zoom","slideShow","fullScreen","thumbs","share","close"]' data-caption='<p>{{post.upload_by.username}}</p>
                                                                    <p>{{post.caption}}</p>
                                                                    <p>Location: {{post.location}}</p>
                                                                    <button type="submit" >Submit Comment</button>'>

            <img src="{{post.photo_pic.url}}" class="gallery-image" height="500">
            </a>

            <div class="card-body">
              <div class="card-footer-section">
                <h5 class="card-title username">{{post.likes}} likes</h5>
                <p class="card-text username">{{post.username}} <span class="caption"> {{post.caption | safe}}</span></p>
                <br>
                <div id="card{{post.id}}" class="mt-2">
                  {%for comment in comments%}
                  {%if comment.post.id == post.id%}
                  <p>
                    <strong>{{comment.username.username}}</strong> {{comment.comment_content}}
                  </p>
                  {%endif%}
                  {%endfor%}

                  <form  action="{%url 'timeline'%}" method="post" enctype="multipart/form-data">
                      {%csrf_token%}

                      {% bootstrap_form form%}
                      <input type="submit" class="btn btn-success btn-md" value="Add Comment">
                  </form>

                </div>

              </div>
            </div>


            <div class="modal-footer">

              <div class="text-center">

              </div>
            </div>

          </div>
      {% endfor %}
    </div>

    </div>

    <div class="col-md-2 col-lg-2">

    </div>




    <div class="col-md-2">
      <div class="panel" style="width: 30rem;">
        <div class="panel-body">
          {% for profile in profiles%}

          <div class="users-image">
            <img src="{{profile.profile_pic.url}}" class="rounded img-fluid" alt="" width=75px height="75px">
            <p  class="profile-username">  <a href="{% url 'profile' profile.username.id %}">{{profile.username}}</a></p>

          </div>

          {% endfor %}

        </div>
      </div>

    </div>


  </div>


{% endblock %}
